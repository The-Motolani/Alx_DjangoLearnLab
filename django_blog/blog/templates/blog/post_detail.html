
{% extends 'base.html' %}

{% block content %}
  <h1>{{ post.title }}</h1>
  <p>Author: {{ post.author.username }}</p>
  <p>Created at: {{ post.created_at }}</p>
  <p>{{ post.content }}</p>
  <p>
    <a href="{% url 'post_update' post.pk %}">Update post</a>
    <a href="{% url 'post_delete' post.pk %}">Delete post</a>
  </p>

  <h2>Comments:</h2>
  <ul>
    {% for comment in post.comments.all %}
      <li>
        <p>{{ comment.content }}</p>
        <p>Author: {{ comment.author.username }}</p>
        <p>Created at: {{ comment.created_at }}</p>
        {% if user == comment.author %}
          <a href="{% url 'comment_update' comment.pk %}">Update</a>
          <a href="{% url 'comment_delete' comment.pk %}">Delete</a>
        {% endif %}
      </li>
    {% empty %}
      <p>No comments yet.</p>
    {% endfor %}
  </ul>

  <form method="post" action="{% url 'comment_create' post.pk %}">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit">Post Comment</button>
  </form>

  <h2>{{ post.title }}</h2>
<p>{{ post.content }}</p>
<p>Tags: 
    {% for tag in post.tags.all %}
        <a href="{% url 'tag_posts' tag.slug %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
    {% endfor %}
</p>

{% endblock %}